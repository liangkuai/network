# 运输层

物理层、数据链路层和网络层共同解决了将主机通过异构网络互连起来面临的问题，**实现了主机到主机的通信**。

但实际上在计算机网络中进行***通信的真正实体是位于通信两端主机中的进程***。

***如何为运行在不同主机上的进程提供直接的通信服务是运输层的任务***，运输层协议又称为端到端协议。

运输层向高层应用屏蔽了下层网络核心的细节，它使进程看见的就好像是两个运输层实体之间有一条端到端的逻辑通信信道。

根据应用需求的不同，因特网的运输层为应用层提供了两种不同运输层协议，
- 面向连接的 TCP
- 面向无连接的 UDP


### 复用和分用

- 发送方的复用：应用层所有的进程都通过传输层封装再传输到网络层
- 接收方的分用：传输层从网络层收到数据后交付给指定的进程

运输层使用端口号来区分应用层的不同进程。

### 端口

端口作为传输层的 SAP（服务访问点），标识主机中的进程。

- 范围：0 - 65535

    - 熟知端口号：0 - 1023
    - 登记端口号：1024 - 49151
    - 短暂端口号：49152 - 65535


### TCP 和 UDP 的对比

| TCP | UDP |
| -- | -- |
| 面向连接的协议，传输数据前先要建立连接 | 无连接的协议 |
| 一对一通信 | 支持一对一、一对多、多对多通信 |
| 面向字节流 | 面向应用报文，适合一次性传输少量数据 |
| 可靠传输，使用流量控制和拥塞控制 | 尽最大努力交付（不可靠），不适用流量控制和拥塞控制 |
| 首部最小 20 字节，最大 60 字节 | 首部开销小，仅 8 字节 |



### 参考

- [5.1 传输层概述 - 计算机网络 - 王道论坛 - bilibili](https://www.bilibili.com/video/BV19E411D78Q?p=61)
- [5.1 运输层概述 - 计算机网络微课堂 - 湖科大教书匠 - bilibili](https://www.bilibili.com/video/BV1c4411d7jb?p=57)