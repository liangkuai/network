# DNS

Domain Name System，域名系统。**用来把域名解析为 IP**。

> 使用 UDP 作为运输层协议，默认端口号 53


### 域名

```
www.三级域名.二级域名.一级域名
```

#### 1. 顶级域名

- 国家顶级域名：cn、us、uk 等
- 通用顶级域名：com、net、org、edu、gov 等
- 反向域 arpa ：用于反向域名解析，即 IP 地址反向解析为域名

#### 2. 二级域名

- 类别域名：ac、com、edu、gov、net、org 等
- 行政区域名：bj（北京市）等


### DNS 服务器

#### 1. 根域名服务器

- 每个「根域名服务器」都知道所有的「顶级域名服务器」的域名及其 IP 地址
- 因特网上共有 13 个不同 IP 地址的「根域名服务器」
- 「根域名服务器」通常并不直接对域名进行解析，而是返回该域名所属「顶级域名服务器」的 IP 地址

#### 2. 顶级域名服务器

- 负责管理在该「顶级域名服务器」注册的所有二级域名

#### 3. 权限域名服务器

- 管理某个区的域名

#### 4. 本地域名服务器

- 不属于 DNS 服务器的等级结构
- 「本地域名服务器」起着代理的作用，会将该报文转发到上述的域名服务器的等级结构中


### DNS 解析过程

两种方式，

- 递归
- 迭代

递归查询对被查询的域名服务器负担太大，通常采用一下模式：

- 从请求主机到「本地域名服务器」的查询是递归查询；
- 而其余域名服务器之间是迭代查询。


### 高速缓存

为了提高 DNS 的查询效率，并减少「根域名服务器」的负载和减少因特网上的 DNS 查询报文数量，在域名服务器中广泛地使用了高速缓存。


### 问题

- DNS 劫持：劫持了 DNS 服务器，修改域名解析结果。
- DNS 污染：伪装成 DNS 服务器，返回假结果。


---

### 参考

- [DNS 原理入门 - 阮一峰](https://www.ruanyifeng.com/blog/2016/06/dns.html)